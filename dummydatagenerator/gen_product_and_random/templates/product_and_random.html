{% extends "base.html" %} {% block content %}
{% load static %}
<!-- {% load widget_tweaks %} -->

<form class="mt-5" action = "" method="post" id="json_form">
    {% csrf_token %}
    {% if JSON_text_area %}
    {{ JSON_text_area }}
    {% endif %}
    <div class="mt-2 col d-flex align-items-end">
        <button form="json_form" class="button is-danger" type="submit" name = "check">JSON チェック</button>
    </div>
</form>

{% if error_msg %}
    <div class="mt-2 alert alert-primary" role="alert">
        <div class="row">
            <div class="col ">
                {{ error_msg.JSON_error | linebreaks}}
                {{ error_msg.error_msg | linebreaks }}
                {{ error_msg.error_form | linebreaks }}
                {{ error_msg.error_rule | linebreaks }}
                {{ error_msg.error_templete | linebreaks }}
            </div>
            <div class="col">
                {{ error_msg.error_sample | linebreaks }}
            </div>
        </div>
    </div>
{% else %}
    <div class="mt-2 alert alert-secondary" role="alert">
        JSONフォーマットに問題はありませんでした。
    </div>
{% endif%}

<div class="tile">
    <div class="tile">
        {% if not error_msg %}
        <form action = "" method="post" id="gen_form" >
            {% csrf_token %}
            <div class = "field">
                <div class = "control">
                    <button class="mt-5 button is-danger" name="generate" href="#">Generate!</button> 
                </div>
            </div>
        </form>
        {% endif %}
    </div>
    <div class="tile">
        {% if dataframe_head %}
            <form action = "" method="post" id="download_csv" >
                {% csrf_token %}
                <div class = "field">
                    <div class = "control">
                        <button class="mt-5 button is-danger" name = "download_csv"> Download CSV</button> 
                    </div>
                </div>
            </form>
        {% endif %}
    </div>
</div>

<div class="col">
    <table class="table-secondary" style="width:100px; height:100px;">
        {% if dataframe_head %}
            {{ dataframe_head | safe }}
        {% endif %}
        {% if dataframe_tail %}
            {{ dataframe_tail | safe }}
        {% endif %}
    </table>
</div>

<nav aria-label="Page navigation example">
    <ul class="mt-5 pagination">
      <li class="page-item"><a class="btn-lg page-link link-danger" href="http://localhost:8000/create">データを作る</a></li>
      <li class="page-item"><a class="btn-lg page-link link-danger" href="http://localhost:8000/make_trend/">傾向をつける</a></li>
    </ul>
</nav>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" 
    crossorigin="anonymous">
</script>

{% endblock %}